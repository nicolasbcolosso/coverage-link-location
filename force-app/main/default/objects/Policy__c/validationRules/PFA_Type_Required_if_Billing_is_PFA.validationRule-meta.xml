<?xml version="1.0" encoding="UTF-8"?>
<ValidationRule xmlns="http://soap.sforce.com/2006/04/metadata">
    <fullName>PFA_Type_Required_if_Billing_is_PFA</fullName>
    <active>true</active>
    <errorConditionFormula>$Setup.Master_Validation__c.Policy_Active__c &amp;&amp;
NOT(OR($RecordType.Name = &quot;Health &amp; Benefits&quot;, $RecordType.Name = &quot;Scale&quot;, $RecordType.Name = &quot;FS Direct&quot;)) &amp;&amp;
NOT(Bypass_PFA_Rule__c) &amp;&amp;
 $User.LastName  &lt;&gt; &apos;Byrne&apos; &amp;&amp;
 $User.LastName  &lt;&gt; &apos;Dev&apos; &amp;&amp;

NOT(OR(ISPICKVAL (Billing__c , &quot;Agency&quot;),ISPICKVAL (Billing__c , &quot;Direct&quot;))) &amp;&amp;

AND(
ISPICKVAL (Billing__c , &quot;Premium Finance Agreement&quot;),  
DATEVALUE(CreatedDate) &gt; DATEVALUE(&quot;2020-11-11&quot;),
ISBLANK(Text(PFA_Type__c)))</errorConditionFormula>
    <errorDisplayField>Billing__c</errorDisplayField>
    <errorMessage>Enter the PFA Type</errorMessage>
</ValidationRule>
